import datetime
from charts.chart import Chart

class TotalOverTimeChart(Chart):
    def __init__(self, cummelative):
        self.cummelative=cummelative

    def show(self, data, show=True):
        start = datetime.datetime(2009, 3, 22)
        results = []
        labels = []
        tmp = 0
        for i in data:
            while ((i[0]-start).days >= 1):
                labels.append(start)
                results.append(tmp)
                start += datetime.timedelta(days=1)
                if not self.cummelative:
                    tmp = 0
            tmp += 1

        super()._show(
        'incidents_over_time',
        labels, 'Incidents over time' , {'total':results}, show=show)
