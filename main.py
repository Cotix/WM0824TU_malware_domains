import datetime
from charts import incidents_over_time, incidents_over_time_per_country


def convert_time(x):
    y = int(x.split('/')[0])
    m = int(x.split('/')[1])
    d = int(x.split('/')[2].split('_')[0])
    return datetime.datetime(y, m, d)

with open('domainlist.csv', 'rb') as f:
    data = [[y.strip('"') for y in x.split(',')] for x in f.read().decode('latin-1').split('\n')]


for d in data:
    if (d[0] == ''):
        continue
    d[0] = convert_time(d[0])
data = [x for x in data if x[0] != '']
data.sort(key=lambda x: x[0])

incidents_over_time_per_country.show(data)
